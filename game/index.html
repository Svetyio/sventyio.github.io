<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <title>Svetlyo Slot Game</title>
  <style>
    body {
      margin: 0;
      background-color: black;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background-color: #111;
    }
    #ui {
      margin-top: 10px;
    }
    .btn {
      padding: 10px 30px;
      margin: 10px;
      font-size: 18px;
      color: white;
      background-color: #c00;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn:hover {
      background-color: #e00;
    }
  </style>
</head>
<body>
  <h1>Добре дошли в Svetlyo Games</h1>
  <canvas id="gameCanvas" width="1000" height="800"></canvas>
  <div id="ui">
    <div id="stats">
      <span id="coins">Монети: 500</span> |
      <span id="lastWin">Последна печалба: 0</span> |
      <span id="totalWin">Обща печалба: 0</span>
    </div>
    <div id="bets">
      <button class="btn" onclick="setBet(20)">20</button>
      <button class="btn" onclick="setBet(40)">40</button>
      <button class="btn" onclick="setBet(60)">60</button>
      <button class="btn" onclick="setBet(100)">100</button>
      <button class="btn" onclick="setBet(200)">200</button>
    </div>
    <button class="btn" onclick="spin()">SPIN</button>
  </div>

  <script>
function drawButton() {
  if (coins <= 0) {
    ctx.fillStyle = 'green';
    ctx.fillRect(canvas.width / 2 - 120, canvas.height - 140, 240, 70);
    ctx.fillStyle = 'white';
    ctx.font = '26px Arial';
    ctx.fillText('НОВА ИГРА', canvas.width / 2 - 70, canvas.height - 95);
    buttonRect = {
      x: canvas.width / 2 - 120,
      y: canvas.height - 140,
      width: 240,
      height: 70,
      restart: true
    };
  } else {
    ctx.fillStyle = '#c00';
    ctx.fillRect(canvas.width / 2 - 100, canvas.height - 140, 200, 60);
    ctx.fillStyle = 'white';
    ctx.font = '24px Arial';
    ctx.fillText('SPIN', canvas.width / 2 - 30, canvas.height - 100);
    buttonRect = {
      x: canvas.width / 2 - 100,
      y: canvas.height - 140,
      width: 200,
      height: 60,
      restart: false
    };
  }
}

canvas.addEventListener('click', function(e) {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  if (x > buttonRect.x && x < buttonRect.x + buttonRect.width &&
      y > buttonRect.y && y < buttonRect.y + buttonRect.height) {
    if (buttonRect.restart) {
      restartGame();
    } else {
      spin();
    }
  } else {
    betButtons.forEach(btn => {
      let dx = x - btn.x;
      let dy = y - btn.y;
      if (Math.sqrt(dx * dx + dy * dy) < 30) {
        selectedBet = btn.bet;
        drawGrid();
      }
    });
  }
});

function restartGame() {
  coins = 500;
  lastWin = 0;
  totalWin = 0;
  generateGrid();
  drawGrid();
}
  </script>
