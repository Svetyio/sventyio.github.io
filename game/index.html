<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>–°–ª–æ—Ç –ú–∞—à–∏–Ω–∞ - –ö–∞–∑–∏–Ω–æ –ò–≥—Ä–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            background: linear-gradient(135deg, #222, #444 90%);
            min-height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Arial, sans-serif;
            color: #f9f9f9;
        }
        .slot-container {
            max-width: 420px;
            margin: 60px auto;
            background: #2b2b35;
            border-radius: 18px;
            box-shadow: 0 8px 32px #0006;
            padding: 32px 20px;
            text-align: center;
        }
        .slot-machine {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        .reel {
            width: 80px;
            height: 120px;
            background: linear-gradient(180deg, #444 80%, #888);
            margin: 0 12px;
            border-radius: 10px;
            box-shadow: 0 2px 8px #0008;
            font-size: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background .3s;
            position: relative;
            overflow: hidden;
        }
        .controls {
            margin-top: 18px;
        }
        .info {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 10px;
            gap: 8px;
            font-size: 16px;
        }
        input[type="number"] {
            width: 52px;
            padding: 3px;
            font-size: 15px;
            border-radius: 4px;
            border: 1px solid #333;
            background: #222;
            color: #f3f3f3;
        }
        button#spinBtn {
            font-size: 19px;
            padding: 12px 38px;
            border-radius: 32px;
            border: none;
            background: linear-gradient(90deg, #fbb034, #ffdd00, #fbb034);
            color: #222;
            font-weight: bold;
            cursor: pointer;
            margin-top: 8px;
            transition: background .2s, box-shadow .2s;
            box-shadow: 0 2px 8px #0007;
        }
        button#spinBtn:disabled {
            background: #aaa;
            color: #666;
            cursor: not-allowed;
        }
        #message {
            margin-top: 24px;
            font-size: 20px;
            min-height: 30px;
            color: #ffeb3b;
            text-shadow: 1px 1px 3px #000a;
        }
        @media (max-width: 480px) {
            .slot-container { max-width: 99vw; padding: 10px 2vw; }
            .reel { width: 22vw; height: 19vw; font-size: 8vw; margin: 0 2vw; }
        }
    </style>
</head>
<body>
    <div class="slot-container">
        <h1>–°–ª–æ—Ç –ú–∞—à–∏–Ω–∞</h1>
        <div class="slot-machine">
            <div class="reel" id="reel1"></div>
            <div class="reel" id="reel2"></div>
            <div class="reel" id="reel3"></div>
        </div>
        <div class="controls">
            <div class="info">
                <span>–ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span> –ª–≤.</span>
                <span>–ó–∞–ª–æ–≥: <input type="number" id="bet" value="10" min="1" max="100" step="1"> –ª–≤.</span>
                <span>–ü–µ—á–∞–ª–±–∞: <span id="win">0</span> –ª–≤.</span>
            </div>
            <button id="spinBtn">–°–ü–ò–ù</button>
        </div>
        <div id="message"></div>
    </div>
    <audio id="winSound" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfa8c8a.mp3"></audio>
    <script>
        // –°–∏–º–≤–æ–ª–∏ –∑–∞ –±–∞—Ä–∞–±–∞–Ω–∏—Ç–µ
        const symbols = ['üçí', 'üçã', 'üçä', 'üçâ', 'üîî', '‚≠ê', '7Ô∏è‚É£', 'üíé'];
        const minBet = 1, maxBet = 100;
        let balance = 1000;
        let spinning = false;

        const balanceElem = document.getElementById('balance');
        const betElem = document.getElementById('bet');
        const winElem = document.getElementById('win');
        const spinBtn = document.getElementById('spinBtn');
        const messageElem = document.getElementById('message');
        const winSound = document.getElementById('winSound');

        function drawReels(result = [0, 0, 0]) {
            for (let i = 0; i < 3; i++) {
                const reel = document.getElementById(`reel${i + 1}`);
                reel.textContent = symbols[result[i]];
            }
        }

        function getRandomSymbol() {
            return Math.floor(Math.random() * symbols.length);
        }

        function getRandomResult() {
            return [getRandomSymbol(), getRandomSymbol(), getRandomSymbol()];
        }

        // –û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –ø–µ—á–∞–ª–±–∞—Ç–∞
        function calcWin(result, bet) {
            // 3 –µ–¥–Ω–∞–∫–≤–∏
            if (result[0] === result[1] && result[1] === result[2]) {
                // –ì–æ–ª—è–º –¥–∂–∞–∫–ø–æ—Ç –Ω–∞ 7Ô∏è‚É£
                if (symbols[result[0]] === '7Ô∏è‚É£') return bet * 100;
                else if (symbols[result[0]] === 'üíé') return bet * 50;
                else return bet * 10;
            }
            // 2 –µ–¥–Ω–∞–∫–≤–∏
            if (result[0] === result[1] || result[1] === result[2] || result[0] === result[2]) {
                return bet * 2;
            }
            // –ë–µ–∑ –ø–µ—á–∞–ª–±–∞
            return 0;
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –≤—ä—Ä—Ç–µ–Ω–µ
        function animateReels(finalResult, callback) {
            const times = [0, 0, 0];
            const maxTimes = [24, 32, 40];
            let intervals = [];

            for (let i = 0; i < 3; i++) {
                intervals[i] = setInterval(() => {
                    times[i]++;
                    document.getElementById(`reel${i + 1}`).textContent = symbols[getRandomSymbol()];
                    if (times[i] >= maxTimes[i]) {
                        clearInterval(intervals[i]);
                        document.getElementById(`reel${i + 1}`).textContent = symbols[finalResult[i]];
                        if (i === 2) callback();
                    }
                }, 50 + i * 25);
            }
        }

        function updateDisplay(win = 0) {
            balanceElem.textContent = balance;
            winElem.textContent = win;
            spinBtn.disabled = spinning || balance < minBet;
            betElem.max = Math.min(balance, maxBet);
        }

        spinBtn.onclick = function () {
            if (spinning) return;
            let bet = parseInt(betElem.value);
            if (isNaN(bet) || bet < minBet || bet > maxBet || bet > balance) {
                messageElem.textContent = "–ù–µ–≤–∞–ª–∏–¥–µ–Ω –∑–∞–ª–æ–≥!";
                return;
            }
            spinning = true;
            updateDisplay();
            messageElem.textContent = "–í—ä—Ä—Ç–∏...";
            let result = getRandomResult();
            balance -= bet;
            updateDisplay(0);

            animateReels(result, () => {
                let win = calcWin(result, bet);
                if (win > 0) {
                    balance += win;
                    winElem.textContent = win;
                    messageElem.textContent = `–ü–µ—á–µ–ª–∏—à ${win} –ª–≤!`;
                    try { winSound.play(); } catch(e){}
                } else {
                    winElem.textContent = 0;
                    messageElem.textContent = "–£–≤–∏, –Ω–µ —Å–ø–µ—á–µ–ª–∏ —Ç–æ–∑–∏ –ø—ä—Ç.";
                }
                spinning = false;
                updateDisplay(win);
            });
        };

        betElem.oninput = function () {
            let bet = parseInt(betElem.value);
            if (isNaN(bet) || bet < minBet) betElem.value = minBet;
            if (bet > Math.min(balance, maxBet)) betElem.value = Math.min(balance, maxBet);
            updateDisplay();
        };

        // –ù–∞—á–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ
        drawReels([0, 1, 2]);
        updateDisplay();
    </script>
</body>
</html>
